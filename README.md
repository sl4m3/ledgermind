# LedgerMind (v2.6.0)

LedgerMind — это полностью автономная система управления памятью для ИИ-агентов.
Она превращает пассивное хранилище в активный «мозг», который самостоятельно
следит за своим здоровьем, нормализует знания и разрешает конфликты без участия
человека.

## Основные возможности

Система предоставляет полный цикл управления жизненным циклом знаний — от
наблюдения до автоматической кристаллизации правил.

- **Фоновое самообслуживание (Heartbeat)**: Встроенный воркер каждые 5 минут
  выполняет очистку, синхронизацию с Git и проверку целостности данных.
- **Интеллектуальное разрешение конфликтов**: Векторный анализ позволяет системе
  автоматически обновлять существующие знания (supersede), если новое решение
  семантически похоже на старое.
- **Канонический реестр целей (Target Registry)**: Автоматическая нормализация и
  поддержка алиасов для объектов памяти (например, `db` -> `database_config`).
- **Автономная рефлексия**: Высокоточные предложения (`proposals`) теперь
  принимаются автоматически при достижении порога уверенности в 0.9.
- **Гибридное хранилище**: Сочетание `SQLite` для быстрых запросов и `Git` для
  версионирования и глубокого аудита.
- **Model Context Protocol (MCP)**: Полноценный сервер для работы с памятью из
  любого совместимого клиента (Claude, Gemini CLI и др.).

## Примеры цепочек работы (Workflows)

LedgerMind минимизирует количество рутинных действий при работе с памятью.

### Цепочка 1: Интеллектуальное обновление (Auto-Supersede)
Вам больше не нужно вручную искать ID старого решения для его замены.
1.  **Запись**: Вы отправляете новое правило для `target="api_settings"`.
2.  **Анализ**: Система видит, что такое правило уже есть, и сравнивает векторы.
3.  **Авто-замещение**: Если контент похож на 85%+, LedgerMind автоматически
    создает связь `supersede`, сохраняя историю и не выдавая ошибку конфликта.

### Цепочка 2: Полная автономия (Self-Evolution)
Процесс превращения сырого опыта в стандарты без вызова команд.
1.  **Сбор**: Фоновый воркер автоматически индексирует ваши коммиты из Git.
2.  **Рефлексия**: Система обнаруживает повторяющиеся ошибки и создает Proposal.
3.  **Фиксация**: Если уверенность системы высока (>0.9), предложение
    автоматически становится активным решением в семантической памяти.

### Цепочка 3: Самоисцеление (Self-Healing)
Система следит за своей работоспособностью.
1.  **Блокировки**: Если процесс упал, оставив lock-файл, воркер автоматически
    снимет его через 10 минут.
2.  **Индексы**: Автоматическое восстановление векторных индексов и синхронизация
    метаданных с файлами на диске.

## Архитектура

Проект имеет модульную структуру, которая разделяет логику рассуждений и методы
хранения данных. Это позволяет вам гибко настраивать компоненты под ваши задачи.

- `ledgermind.core`:
  - `api`: высокоуровневые интерфейсы, включая `IntegrationBridge` и
    `MemoryManager`.
  - `reasoning`: логика рефлексии, дистилляции знаний и разрешения конфликтов.
  - `stores`: реализации хранилищ, таких как `Semantic`, `Episodic` и `Vector`.
- `ledgermind.server`: реализация MCP-сервера, интерфейс командной строки (CLI)
  и инструменты мониторинга.

## Установка

Вы можете установить LedgerMind с помощью пакетного менеджера `pip`. Выберите
подходящий вариант установки в зависимости от ваших потребностей.

Для базовой установки выполните:
```bash
pip install ledgermind
```

Если вам нужен векторный поиск, используйте:
```bash
pip install ledgermind[vector]
```

Для настройки среды разработки выполните:
```bash
pip install -e .[dev]
```

## Использование

LedgerMind поддерживает два основных режима работы: прямую интеграцию в виде
библиотеки и запуск в качестве независимого сервиса через MCP.

### Прямая интеграция

Этот режим рекомендуется для создания полностью автономных агентов. Вы можете
использовать `IntegrationBridge` для взаимодействия с системой памяти.

```python
from ledgermind.core.api.bridge import IntegrationBridge

# Инициализируйте мост
bridge = IntegrationBridge(memory_path="./memory")

# Получите контекст для промпта
context = bridge.get_context_for_prompt("Как настроить базу данных?")
print(context)

# Запишите новое решение
bridge.memory.record_decision(
    title="Использовать PostgreSQL",
    target="database",
    rationale="PostgreSQL обеспечивает надежность и поддержку сложных запросов."
)
```

### Работа через MCP

Вы можете запустить LedgerMind как сервер для взаимодействия с внешними
клиентами. Для этого используйте команду запуска:

```bash
ledgermind-mcp run --path ./memory
```

## Документация

Для более глубокого изучения возможностей системы ознакомьтесь с нашими
руководствами. Они помогут вам быстрее интегрировать LedgerMind в ваш проект.

- [Руководство по интеграции](docs/INTEGRATION_GUIDE.md) — подробные примеры
  использования.
- [Быстрый старт](docs/tutorials/QUICKSTART.md) — пошаговый туториал по созданию
  первого агента.
- [Сравнение](docs/COMPARISON.md) — информация о том, чем LedgerMind отличается
  от альтернативных решений.

## Лицензия

Проект распространяется под лицензией **Non-Commercial Source Available License
(NCSA)**. Перед использованием ознакомьтесь с условиями.

- **Для частных лиц**: свободное использование в личных, образовательных и
  экспериментальных целях.
- **Для организаций и коммерции**: любое коммерческое использование строго
  запрещено без письменного разрешения автора.
- **НКО и образование**: разрешено использование для академических и
  некоммерческих целей.

Для получения коммерческой лицензии свяжитесь с автором (Stanislav Zotov).

---
*LedgerMind — фундамент автономности ИИ.*
