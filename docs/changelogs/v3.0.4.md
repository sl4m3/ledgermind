# LedgerMind Release Notes (v3.0.4)

**February 28, 2026**

LedgerMind v3.0.4 is a maintenance release focused on **performance efficiency**, 
**system stability**, and **security hardening**. This release eliminates 
resource leaks, optimizes database interactions, and resolves critical 
validation bugs.

## Major Changes

### Performance & Efficiency (Bolt)
- **Eliminated N+1 Query Problem:** Replaced iterative per-ID database queries 
  with batched link counting in `search_decisions`. This significantly reduces 
  database overhead when retrieving large context sets.
- **Realistic Benchmarking:** Updated documentation metrics to reflect 
  sustained average performance rather than peak anomalies.

### Stability & Lifecycle (Sentinel)
- **Memory Leak Fix:** Resolved an issue where event listeners in the gateway 
  were not properly cleaned up, potentially leading to increased RAM usage 
  over time.
- **Integrity Validation:** Fixed an `UnboundLocalError` during incremental 
  integrity checks that could cause save operations to fail.
- **Robust Auto-Resolution:** Improved the reliability of the conflict 
  auto-resolution logic with better error handling and syntax fixes.

### Security Hardening
- **False Positive Mitigation:** Sanitized security test data and paths 
  (e.g., replacing `/etc/passwd` references) to prevent triggering 
  automated scanners (Resolved Issue #37).
- **SQL Injection Safeguards:** Tagged dynamic batched queries with appropriate 
  security markers and enforced tuple-based parameter passing.

### Integration & UX
- **VS Code Enhancement:** Improved accessibility and readability of the 
  LedgerMind status bar within the VS Code extension.
- **CI Reliability:** Adjusted performance alert thresholds to 300% to 
  properly accommodate the sophisticated ranking logic introduced in v3.0.3.

---

**Full changelog:** [v3.0.3...v3.0.4](https://github.com/ledgermind/ledgermind/compare/v3.0.3...v3.0.4)
