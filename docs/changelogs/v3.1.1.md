# Changelog v3.1.1 (March 1, 2026)

LedgerMind v3.1.1 is a critical security and stability release. It addresses multiple high-severity vulnerabilities found during the audit and restores peak performance for concurrent search operations.

## Highlights

### üõ°Ô∏è Hardened Security
- **Atomic File Locking:** Fixed TOCTOU race conditions in `FileSystemLock` using atomic `O_EXCL` operations and improved `fcntl` queuing.
- **Strict Path Validation:** Implemented robust Path Traversal protection in `SemanticStore` using path canonicalization.
- **SQL Injection Defenses:** Eliminated all string-formatted SQL queries in `EpisodicStore`, moving to a mandatory parameterized template pattern.
- **Constant-Time Comparisons:** Fixed API key timing attack vulnerability in the gateway (Sentinel security patch).

### ‚ö° Performance & Stability
- **Path Validation Caching:** Added `lru_cache` to file ID validation, restoring hybrid search throughput from 250 ops/s to **690+ ops/s**.
- **Concurrent SQLite Optimization:** Resolved "database is locked" errors by switching to `BEGIN IMMEDIATE` transactions and implementing exponential backoff retries.
- **Bolt N+1 Fix:** Optimized grounding link retrieval by batching metadata fetches.

### üß™ Infrastructure & Quality
- **Minimal CI Pipeline:** Introduced a new GitHub Actions workflow with integrated security scanning (Bandit, Safety, Pip-audit) and linting (Ruff, Black, MyPy).
- **Automated Audit Tracking:** Established a procedural standard for resolving audit-identified issues with mandatory regression testing.

### üéÆ UX & Integration
- **A11y Support:** Added accessibility information to the VS Code extension status bar for better screen reader compatibility.

## What's Changed
- feat: add minimal CI pipeline with security scanning by @sl4m3 in [#50](https://github.com/sl4m3/ledgermind/pull/50)
- security: critical fixes for SQLi, Path Traversal, and Race Conditions by @sl4m3 in [#52](https://github.com/sl4m3/ledgermind/pull/52)
- perf: restore peak search throughput with lru_cache validation by @sl4m3 in [#55](https://github.com/sl4m3/ledgermind/pull/55)
- fix(core): resolve SQLite concurrency deadlocks by @sl4m3 in [#58](https://github.com/sl4m3/ledgermind/pull/58)

**Full Changelog:** https://github.com/sl4m3/ledgermind/compare/v3.1.0...v3.1.1
